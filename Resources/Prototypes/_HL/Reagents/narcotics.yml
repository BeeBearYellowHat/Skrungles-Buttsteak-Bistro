# Widow Elite Narcotic System
# Three-stage synthesis: WidowsBite -> WidowsVenom -> Widow (or WidowsRuin if failed)
# With custom addiction system: WidowsCurse

# Stage 1: WidowsBite - Safe gateway precursor
- type: reagent
  id: WidowsBite
  name: reagent-name-widows-bite
  group: Narcotics
  desc: reagent-desc-widows-bite
  physicalDesc: reagent-physical-desc-viscous
  flavor: bitter
  color: "#4a0e4e"
  metabolisms:
    Narcotic:
      metabolismRate: 0.3
      effects:
      - !type:MovespeedModifier
        walkSpeedModifier: 1.1
        sprintSpeedModifier: 1.1
      - !type:GenericStatusEffect
        key: Jitter
        time: 5.0
        type: Remove
      - !type:PopupMessage
        type: Local
        visualType: Medium
        messages:
          - "widows-bite-effect-calm"
          - "widows-bite-effect-focused"
          - "widows-bite-effect-alert"
        probability: 0.1

# Stage 2: WidowsVenom - Dangerous combat precursor
- type: reagent
  id: WidowsVenom
  name: reagent-name-widows-venom
  group: Narcotics
  desc: reagent-desc-widows-venom
  physicalDesc: reagent-physical-desc-volatile
  flavor: metallic
  color: "#1a3d1a"
  metabolisms:
    Narcotic:
      metabolismRate: 0.2
      effects:
      - !type:MovespeedModifier
        walkSpeedModifier: 1.25
        sprintSpeedModifier: 1.25
      - !type:PopupMessage
        type: Local
        visualType: Medium
        messages:
          - "widows-venom-effect-power"
          - "widows-venom-effect-invincible"
          - "widows-venom-effect-enhanced"
        probability: 0.12
      - !type:GenericStatusEffect
        key: SeeingRainbows
        component: SeeingRainbows
        type: Add
        time: 8
        refresh: false
        conditions:
        - !type:ReagentThreshold
          min: 3
      - !type:AdjustReagent
        conditions:
        - !type:ReagentThreshold
          reagent: Addictine
          max: 15
        - !type:ReagentThreshold
          min: 4
        reagent: Addictine
        amount: 1.5
    Poison:
      metabolismRate: 0.1
      effects:
      - !type:HealthChange
        conditions:
        - !type:ReagentThreshold
          min: 5
        damage:
          types:
            Poison: 2
            Asphyxiation: 1

# Stage 3A: Widow - Elite final product (successful synthesis)
- type: reagent
  id: Widow
  name: reagent-name-widow
  group: Narcotics
  desc: reagent-desc-widow
  physicalDesc: reagent-physical-desc-inky
  flavor: chaos
  color: "#000000"
  recognizable: false
  metabolisms:
    Narcotic:
      metabolismRate: 0.1
      effects:
      # Elite performance benefits
      - !type:MovespeedModifier
        walkSpeedModifier: 1.5
        sprintSpeedModifier: 1.5
      - !type:ResetNarcolepsy
        conditions:
        - !type:ReagentThreshold
          min: 1
      - !type:GenericStatusEffect
        key: Stun
        time: 15
        type: Remove
      - !type:GenericStatusEffect
        key: KnockedDown
        time: 15
        type: Remove
      - !type:GenericStatusEffect
        key: StaminaModifier
        component: StaminaModifier
        time: 20
        type: Add
      - !type:GenericStatusEffect
        key: Adrenaline
        component: IgnoreSlowOnDamage
        time: 25
      # Treatment resistance
      - !type:AdjustReagent
        reagent: Charcoal
        amount: -8.0
      - !type:AdjustReagent
        reagent: Ipecac
        amount: -8.0
      # Balanced negative effects - Medium doses (6-12u)
      - !type:HealthChange
        conditions:
        - !type:ReagentThreshold
          min: 6
        damage:
          types:
            Poison: 1
            Asphyxiation: 0.5
      - !type:AdjustTemperature
        conditions:
        - !type:ReagentThreshold
          min: 8
        amount: -15000
      - !type:Jitter
        conditions:
        - !type:ReagentThreshold
          min: 10
      # High doses (13-20u) - Overdose territory
      - !type:HealthChange
        conditions:
        - !type:ReagentThreshold
          min: 13
        damage:
          types:
            Poison: 5
            Asphyxiation: 3
            Caustic: 2
      - !type:Paralyze
        conditions:
        - !type:ReagentThreshold
          min: 15
        probability: 0.08
        paralyzeTime: 5
      - !type:PopupMessage
        conditions:
        - !type:ReagentThreshold
          min: 18
        type: Local
        visualType: LargeCaution
        messages:
          - "widow-overdose-psychosis-1"
          - "widow-overdose-psychosis-2"
          - "widow-overdose-hallucination"
        probability: 0.15
      # Extreme doses (21u+) - Lethal territory
      - !type:HealthChange
        conditions:
        - !type:ReagentThreshold
          min: 21
        probability: 0.05
        damage:
          types:
            Asphyxiation: 25
      - !type:AdjustTemperature
        conditions:
        - !type:ReagentThreshold
          min: 23
        amount: -50000
      # Elite addiction system
      - !type:AdjustReagent
        conditions:
        - !type:ReagentThreshold
          reagent: WidowsCurse
          max: 50
        - !type:ReagentThreshold
          min: 3
        reagent: WidowsCurse
        amount: 3.5

# Stage 3B: WidowsRuin - Failed synthesis (extremely nasty poison)
- type: reagent
  id: WidowsRuin
  name: reagent-name-widows-ruin
  group: Toxins
  desc: reagent-desc-widows-ruin
  physicalDesc: reagent-physical-desc-putrid
  flavor: horrible
  color: "#1a0d1a"
  recognizable: true
  metabolisms:
    Poison:
      metabolismRate: 0.5
      effects:
      # Immediate devastating effects
      - !type:PopupMessage
        type: Local
        visualType: LargeCaution
        messages:
          - "widows-ruin-effect-burning"
          - "widows-ruin-effect-agony"
          - "widows-ruin-effect-regret"
        probability: 0.3
      - !type:HealthChange
        damage:
          types:
            Poison: 8
            Caustic: 5
            Asphyxiation: 3
      # Progressive damage (2u+)
      - !type:HealthChange
        conditions:
        - !type:ReagentThreshold
          min: 2
        damage:
          types:
            Poison: 15
            Caustic: 8
            Cold: 4
            Cellular: 2
      # Catastrophic effects (5u+)
      - !type:ChemVomit
        conditions:
        - !type:ReagentThreshold
          min: 5
        probability: 0.8
      - !type:HealthChange
        conditions:
        - !type:ReagentThreshold
          min: 5
        damage:
          types:
            Poison: 25
            Caustic: 15
            Asphyxiation: 10
      - !type:Paralyze
        conditions:
        - !type:ReagentThreshold
          min: 8
        probability: 0.15
        paralyzeTime: 8

# Elite Addiction Chemical: WidowsCurse
- type: reagent
  id: WidowsCurse
  name: reagent-name-widows-curse
  group: Biological
  desc: reagent-desc-widows-curse
  physicalDesc: reagent-physical-desc-viscous
  flavor: bitter
  color: "#2d0a2d"
  recognizable: false
  metabolisms:
    Poison:
      metabolismRate: 0.005
      effects:
      # Enhanced withdrawal messages
      - !type:PopupMessage
        type: Local
        visualType: LargeCaution
        messages:
          - "widows-curse-withdrawal-1"
          - "widows-curse-withdrawal-2"
          - "widows-curse-withdrawal-3"
          - "widows-curse-withdrawal-4"
          - "widows-curse-withdrawal-5"
        probability: 0.12
        conditions:
        - !type:ReagentThreshold
          reagent: Widow
          max: 0.01
      # Withdrawal blindness
      - !type:GenericStatusEffect
        key: TemporaryBlindness
        component: TemporaryBlindness
        conditions:
        - !type:ReagentThreshold
          min: 8
        - !type:ReagentThreshold
          reagent: Widow
          max: 0.01
        time: 20
      # Worse movement penalties than Addictine
      - !type:MovespeedModifier
        walkSpeedModifier: 0.85
        sprintSpeedModifier: 0.5
        conditions:
        - !type:ReagentThreshold
          min: 3
        - !type:ReagentThreshold
          reagent: Widow
          max: 0.01
      # Stronger treatment resistance than Addictine
      - !type:AdjustReagent
        reagent: Charcoal
        amount: -12.0
      - !type:AdjustReagent
        reagent: Ipecac
        amount: -12.0
      # Withdrawal physical damage
      - !type:HealthChange
        conditions:
        - !type:ReagentThreshold
          min: 15
        - !type:ReagentThreshold
          reagent: Widow
          max: 0.01
        damage:
          types:
            Asphyxiation: 1
            Poison: 0.5